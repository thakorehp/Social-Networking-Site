<!DOCTYPE html>

{% load staticfiles %}

<html>
<head>
    <title>{% block title %}


    {% endblock %}</title>
    <meta charset="UTF-8">
    <link rel="rel" type="text/css" href="logo.png">
	     <!-- Latest compiled and minified CSS -->

	     <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="icon" type="text/css" href="logo.png">
  <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script> -->

	<link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.min.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">
        <script type="text/javascript" href="{% static 'js/bootstrap.js' %}"></script>
	<script type="text/javascript" href="{% static 'js/bootstrap.min.js' %}"></script>
	<link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">






	
 <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/js/materialize.min.js"></script>
	<!-- jQuery library -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/css/materialize.min.css">
	<!-- Latest compiled JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> 
	<!-- <link rel="stylesheet" href="{% static "css/font-awesome.css" %}" type="text/css" media="screen"> -->
	<link href="https://use.fontawesome.com/releases/v5.0.6/css/all.css" rel="stylesheet">
	
<!-- 	<link rel="stylesheet" href="{% static "css/sty-chat.css" %}" /> -->
	<!-- <script src="{% static "js/jquery-1.12.2.min.js" %}" type="text/javascript"></script>
 -->	<script src="{% static 'js/csrfd.js' %}" type="text/javascript"></script>
	<script src="{% static 'channels/js/websocketbridge.js' %}" type="text/javascript"></script>
	 <!-- Compiled and minified CSS -->
    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="{% static 'css/style_1.css' %}" type="text/css" media="screen" />

    <!-- Compiled and minified JavaScript -->
   
            
	{% block extra_head %}{% endblock %}
	<style>
		.username {
        display: inline-block;
        color: black;
        width: 100px;
        font-weight: bold;
        text-transform: capitalize;
    }

		.not_ext{
			width: 0px;
			height: 0px;
			content: '';
			top: -13px;
			right: 172px;
			position: absolute;
			border-style: solid;
			border-width: 0px 23px 13px 23px;
			border-color: transparent transparent Green transparent;
			float: left;
			clear: left;

			padding: 1px;
		}
		.not_area{
			position: absolute;
			height: 457px;
			width: 461px;
			background: Green;
			right: 10.3%;
			top: 51px;
			box-shadow: 0 3px 8px green;
			display: None;
		}
		.nav_right{
			float: right;
			clear: right;
		}
	</style>
</head>
<body>
	<header style="height: 129px;">
		<!-- <nav class="navbar navbar-default" style="background-color: #3f51b5 !important;">
		<div class="container-fluid">
			<div style="width: 43%;height: 48px;float: left;clear: left;">
			</div>
		<ul class="nav nav-pills nav_right">
		{% if request.user.is_authenticated %}
			<li class="" id="notificationa" style="z-index: 1;">
			<span class="badge" id="jt-alarm-count" style="z-index: 2;margin-top: -2px;position:  absolute;margin-left: 26px;color: white;">0</span>
			<a class="" style="font-size:20px;"><i class="fas fa-bell"></i></a>
			 
			 </li>
			<div class="not_area" style="overflow-y: visible;">
				<div class="not_ext">
				</div>
				<div style="overflow: auto;margin-top: 2px;height:457px;margin: 6px 4px 0px 3px;" id="not_area">
				
  			</div>
			</div>
			<li class="nav-item"><a href="#">{{ request.user }}</a></li>
			<li class="nav-item"><a href="/accounts/logout/">Logout</a></li>
		{% endif %}
		</ul>
		</div>
		</nav> -->
		<nav class="indigo" >
      <div class="container" style="padding-top: 13px;">
    <div class="nav-wrapper" >
      <a href="{% url 'marvel:index' %}" data-position="bottom" data-toggle="tooltip" title="Home.." class="brand-logo tooltipped">
          <i class="large material-icons" style="margin-top: -11px;">home</i> |
          Ch@tmash
      </a>
      <!-- <a href="#" data-activates="mobile-demo" class="button-collapse"><i class="material-icons">menu</i></a> -->
      <ul class="right hide-on-med-and-down">
          <li>
                    
                    
          </li>
          <li>
             <div class="col-sm-2"></div>
          </li>
          <li><a href="/marvel/timeline/" class="btn-floating green pulse" data-toggle="tooltip" title="Timeline"><i class="material-icons">burst_mode</i></a></li>
          <li id="notificationa"><span class="badge" id="jt-alarm-count" style="background-color:green;z-index: 2;margin-top: -5px;position: absolute;margin-left: 35px;color: white;width:5px;">0</span><a class="btn-floating green pulse" data-toggle="tooltip" title="Notification"><i class="material-icons">add_alert</i>
          </a></li>
          <div class="not_area" style="overflow-y: visible;background: green;">
				<div class="not_ext">
				</div>
				<div style="overflow: auto;margin-top: 2px;height:457px;margin: 6px 4px 0px 3px;" id="not_area">
				
  			</div></div>

          <li><a href="/chat_f/" class="btn-floating green pulse" data-toggle="tooltip" title="Chats"><i class="material-icons">chat</i></a></li>
          <li><a href="/marvel/change/" class="btn-floating green pulse" data-toggle="tooltip" title="Edit Password"><i class="material-icons">edit</i></a></li>
          <li><a class="btn-floating red pulse" data-toggle="tooltip" title="Profile" href="/marvel/profile/"><i class="material-icons">account_circle</i></a></li>
        <li>
            <a class="btn-floating red" href="/marvel/logout" data-toggle="tooltip" title="Logout" >

                <i class="large material-icons">power_settings_new</i>
            </a>
        </li>

      </ul>
      <!-- <ul class="side-nav" id="mobile-demo">
          <li><a href="">LogOut</a></li>
      </ul> -->
    </div>
     </div>
  </nav>
	</header>
	<section style="float: left;
    width: 1039px;
    overflow: auto;clear: left;width: 1134px;">
		{% block content %}
		{% endblock %}
	</section>
	{% block extra_body %}{% endblock %}
	<script type="text/javascript">

			



			 get_noti();
           // $("div.alert").delay(2000).fadeOut(300);
                        var not_div = $('#not_area');
                        var noti="";
                        
                        function get_noti(){
                        $.ajax({
                                type: 'GET',
                                url: '/getnot/',
                                success: function(json) {
                                    if(json.n_n=="True"){
                                        
                                    }
                                    else{
                                    console.log('hey');
                                    var jsi = JSON.parse(json.n_n);
                                    console.log(json.co);
                                    
                                    for (var i = 0; i < jsi.length; i++) {

                                        console.log(jsi[i]['fields']['sender']);
                                        console.log(jsi[i]['fields']['room_id']);
                                        var b = "<div class='alert alert-success alert-dismissable fade in' style='margin-bottom: 1px !important;' id='nc'  f-id='"+jsi[i]['fields']['room_id']+"'><strong>"+jsi[i]['fields']['sender']+"</strong> You have a chat Notification</div>";
                                        console.log(b);
                                            not_div.prepend(b);
                                    }    
                                    	$('#jt-alarm-count').text(json.co);   
                                    }                     
                                }
                            }).done(function(){
                                setTimeout(function() {
                                        get_noti();
                                    },10000)
                            }); }

                            //toggle notification
                            	$(document).ready(function(){
									    $("#notificationa").click(function(){
									        $("div.not_area").toggle(700);
									        $('#jt-alarm-count').text('0'); 
									    });
									   $.ajax({
		                                type: 'GET',
		                                url: '/removenot/',
		                                success: function(json){

		                                }
											});
									 });
	</script>
</body>
</html>
